CREATE DATABASE IGAPET;		-- nom temporaire pour pas supprimer IGAPET

USE IGAPET;

CREATE TABLE Users(
	UserID int PRIMARY KEY AUTO_INCREMENT,          -- principal key
	FirstName varchar(70),
	LastName varchar(70),
    Mail varchar(70),		            	        -- should be unique
	CreationDate datetime,  		                -- automatic
    UserPassword varchar(255),		                -- should be crypted + condition
	UserTypeID tinyint,
    Phone varchar(15)                			    -- should be unique
);

CREATE TABLE Houses(
	HouseID int PRIMARY KEY AUTO_INCREMENT,         -- primary key
	UserID int,			                            -- foreign key
	Name varchar(50) NOT NULL,
	Address varchar(255) NOT NULL,                  -- change varcharSize
	PostalCode varchar(10) NOT NULL,
	Country varchar(30) NOT NULL,
	NumberOfFloor tinyint NOT NULL
);

CREATE TABLE Rooms(
	RoomID int PRIMARY KEY AUTO_INCREMENT,          -- primary key
	HouseID int,			                        -- foreign key
	Name varchar(30) NOT NULL,
	xPosition real NOT NULL,
	yPosition real NOT NULL,
	Width real NOT NULL,
	Height real NOT NULL,
	Floor tinyint			                        -- must be < HouseID->NumberOfFloor -1
);

CREATE TABLE Captors(
	CaptorID int PRIMARY KEY AUTO_INCREMENT,        -- primary key
	RoomID int, 				            	    -- foreign key
	CaptorTypeID int,  			            	    -- foreign key
	Value varchar(255) 		                	    -- modify according to precision
  
);

CREATE TABLE Actuators(
	ActuatorID int PRIMARY KEY AUTO_INCREMENT,	    -- primary key
	RoomID int,						                -- foreign key
	ActuatorTypeID int,			                    -- foreign key
	State varchar(255)		                	    -- modify according to precision
);

CREATE TABLE Scenarios(
	ScenarioID int PRIMARY KEY AUTO_INCREMENT,      -- primary key
ActuatorID int,				                        -- foreign key
	CibleState varchar(255),		                -- modify according to precision
	ActionDate datetime
);

CREATE TABLE Notifications(
	NotificationID int PRIMARY KEY AUTO_INCREMENT,  -- primary key
	CaptorID int,					                -- foreign key
	Threshold varchar(255),			                -- modify according to precision
	ThresholdType varchar(1)		                -- < or >
);

CREATE TABLE UserTypes(
	UserTypeID int PRIMARY KEY AUTO_INCREMENT,	    -- primary key
	EditionAdmin varchar(1),		
	GererSousCompte varchar(1),
	Ajouts varchar(1)
							                        -- add more possibility?
);

CREATE TABLE CaptorTypes(
	CaptorTypeID int PRIMARY KEY AUTO_INCREMENT,    -- primary key
	CaptorName varchar(30),
	Unit varchar(10)
											        -- add more information? price,size,ect
);

CREATE TABLE ActuatorTypes(
	ActuatorTypeID int PRIMARY KEY AUTO_INCREMENT,  -- primary key
	ActuatorName varchar(30),
	Unit varchar(10),
	MinimumValue varchar(255),					    -- modify according to precision
	MaximumValue varchar(255)					    -- modify according to precision
);

CREATE TABLE PageContent(
	PageID int PRIMARY KEY AUTO_INCREMENT,		    -- primary key
	PageContent TEXT
);

CREATE TABLE Historic(
	HistoicID int PRIMARY KEY AUTO_INCREMENT,	    -- primary key (2,147,483,647 x 2  too small?)
	CaptorID int,
	Value varchar(255),				                -- modify according to precision
	Date datetime
);
